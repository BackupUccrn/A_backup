<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:;base64,=" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UCCRN Atlas Demo</title>
    <script type="module" src="https://js.arcgis.com/calcite-components/3.0.2/calcite.esm.js"></script>
    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div id="viewDiv"></div>
    <calcite-dialog open modal heading="Welcome to UCCRN Atlas Demo" id="example-dialog">
      <calcite-label>
        Choose your user role
        <calcite-tile-select-group>
          <calcite-tile-select checked input-enabled input-alignment="end" icon="map"
            heading="Mapping View"
            description="This role allows users view case studies on a Map">
          </calcite-tile-select>
          <calcite-tile-select input-enabled input-alignment="end" icon="table"
            heading="Database View"
            description="This role allows users view case studies in a Table">
          </calcite-tile-select>
        </calcite-tile-select-group>
      </calcite-label>
      <calcite-notice open icon width="full">
        <div slot="message">You can edit this choice later on, in Settings.</div>
      </calcite-notice>
      </calcite-button>
      <calcite-button slot="footer-end" appearance="outline">
        Cancel
      </calcite-button>
      <calcite-button slot="footer-end" id="save-button">
        Get Started
      </calcite-button>
    </calcite-dialog>
    <script type="module" src="./src/main.js"></script>
    <script>
      const dialog = document.getElementById("example-dialog");
      const saveButton = document.getElementById("save-button");

      saveButton?.addEventListener("click", function() {
        const selectedRole = document.querySelector('calcite-tile-select[checked]');
        if (selectedRole?.heading === "Mapping View") {
          dialog.open = false;
          document.getElementById("viewDiv").scrollIntoView({ behavior: "smooth" });
        } else if (selectedRole?.heading === "Database View") {
          window.open("https://uccrn.ei.columbia.edu/case-study-docking-station/", "_blank");
        }
      });
    </script>
    <calcite-notice open icon="information" closable style="position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 1000;">
      <div slot="title">This App is in development!</div>
      <div slot="message">Datasets, Services and other resoruces are being accessed for development purposes</div>
      <calcite-action slot="actions-end" icon="launch" text="Citations" text-enabled onclick="window.open('https://docs.google.com/document/d/14GTO9evd7z1-xvTIbXxFOXWD8TAK_XeZzxVJzUYwDMU/edit?usp=sharing', '_blank')"></calcite-action>
      </calcite-action>
    </calcite-notice>
  </body>
</html>
